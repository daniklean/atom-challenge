{
  "name": "auto_IG_generator_poster_#1",
  "nodes": [
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1uWrtDEjNz2kpKFoUwlf7hqWOgRcXmo31qjXlrAQ4ATA",
          "mode": "list",
          "cachedResultName": "event database",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1uWrtDEjNz2kpKFoUwlf7hqWOgRcXmo31qjXlrAQ4ATA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "panama beach city",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1uWrtDEjNz2kpKFoUwlf7hqWOgRcXmo31qjXlrAQ4ATA/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Event Name": "={{ $json['Event Name'] }}",
            "Date": "={{ $json.Date }}",
            "Description": "={{ $json.Location }}",
            "Event Link": "={{ $json['Event Link'] }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Event Name",
              "displayName": "Event Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Link",
              "displayName": "Event Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "0d9501d6-6dc6-4cd1-82cb-003c6d96e586",
      "name": "Store Event Data",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4,
      "position": [
        1020,
        640
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Hs12up00RYeUYhHs",
          "name": "Google Sheets account 4"
        }
      }
    },
    {
      "parameters": {
        "workflowId": "{{ REPLACE_WITH_CONTENT_GENERATION_WORKFLOW_ID }}",
        "options": {}
      },
      "id": "016408f1-2cf2-454b-b363-84c9501a9e6e",
      "name": "Trigger Content Generation",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        1240,
        640
      ],
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "{{ REPLACE_WITH_SLACK_CHANNEL_ID }}",
          "mode": "name"
        },
        "text": "=🚨 RSS Feed Error: {{ $node[\"Read RSS Feed\"].error?.message || 'Unknown error occurred' }}\n\nWorkflow: RSS Feed Monitoring\nTime: {{ $now.toISO() }}",
        "otherOptions": {}
      },
      "id": "4cf5fdb6-6e15-4748-88b2-0cf479b7ada6",
      "name": "Log RSS Error",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        1240,
        440
      ],
      "webhookId": "71adc422-1b23-4334-b497-366a6763d2b4",
      "disabled": true
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $execution.id }}"
      },
      "id": "fac903a8-8642-4e0e-ac81-f59146abce9a",
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        540,
        880
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.toolSerpApi",
      "typeVersion": 1,
      "position": [
        720,
        880
      ],
      "id": "1792cff2-e56a-420e-aef8-f3017fd8e3eb",
      "name": "SerpAPI",
      "credentials": {
        "serpApi": {
          "id": "WCdGfwkf8VGJDDz1",
          "name": "SerpAPI account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        380,
        880
      ],
      "id": "5e2d1cd6-08b5-476e-aadb-79d25a1c78bd",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "UqJkIfc9Zakye4to",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "formTitle": "Local Events",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Query"
            },
            {
              "fieldLabel": "City"
            },
            {
              "fieldLabel": "Country"
            },
            {
              "fieldLabel": "Date Range"
            },
            {
              "fieldLabel": "Interests"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        140,
        640
      ],
      "id": "da61ae49-6038-4290-9fe4-3e5c0b5d451f",
      "name": "On form submission",
      "webhookId": "129a4331-b135-4dff-aeca-81d92ad69af1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "Find relevant events based on the provided user profile and preferences.",
        "options": {
          "systemMessage": "=You are a specialized Local Event Finder assistant. Your mission is to discover relevant events tailored to user preferences and present them in a clear, engaging markdown format.\n\n**User Preferences to Consider:**\n*   **Query:** {{ $json.Query }}\n*   **City:** {{ $json.City }}\n*   **Country:** {{ $json.Country }}\n*   **Date Range:** {{ $json['Date Range'] }}\n*   **Interests:** {{ $json.Interests }}\n\n**Your Operational Protocol:**\n\n1.  **Event Discovery Goal:**\n    *   Identify 1 to 5 events that closely match all provided user criteria.\n    *   Focus on quality and relevance over quantity.\n\n2.  **Location Search Strategy:**\n    *   **Primary Focus:** The specified `City`.\n    *   **Secondary Search:** If results are sparse, expand to nearby cities or statewide within the `Country`.\n    *   **Tertiary Search (Optional):** For exceptionally fitting events based on interests, consider the nearest capital city or other major capital cities in the `Country`.\n\n3. SerpAPI\n    *   Use API to search Google for local events and holidays\n\n**Information Extraction per Event:**\n    For each recommended event, strive to find and include:\n    *   Event Name\n    *   Date(s) and Time(s)\n    *   Full Location Address/Venue Name\n    *   A concise and engaging Description\n    *   Official Event Link (highly preferred)\n    *   Booking/Ticket Link (if available and distinct from the event link)\n\n**Response Formatting:**\n    *   Present your findings in well-structured markdown.\n    *   Use headings (e.g., `##`), bullet points (`*`), bolding (`**text**`), and relevant emojis to enhance readability and visual appeal.\n    *   Clearly separate information for each event.\n\n**Handling No Results:**\n    *   If, after a thorough search (including expanded location criteria), no suitable events are found, clearly and politely inform the user.\n\n**Example Structure for a Single Event in Your Response:**\n\n---\n🎉 **[Event Name]** 🎉\n*   **📅 Date & Time:** [Event Date(s)], [Event Time(s)]\n*   **📍 Location:** [Venue Name, Full Address, City]\n*   **📝 Description:** [A brief, enticing summary of what the event offers and how it matches user interests.]\n*   **🔗 Event Link:** [Link to Official Event Page]\n---\n\nPrioritize accuracy, relevance, and the direct usability of the information provided. Ensure any links are functional.\n\nOutput as a list in JSON"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        440,
        640
      ],
      "id": "c1a7e59d-d64b-4f25-b7dc-78a920a69f82",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "instructions": "Parse data into example output\n\n[\n  {\n    \"Event Name\": \"Fourth of July Fireworks\",\n    \"Date\": \"2025-07-04\",\n    \"Location\": \"Panama Beach City, FL\",\n    \"Description\": \"Annual fireworks show on the beach.\",\n    \"Event Link\": \"https://example.com/fireworks\"\n  },",
        "codeGeneratedForPrompt": "Parse data into example output\n\n[\n  {\n    \"Event Name\": \"Fourth of July Fireworks\",\n    \"Date\": \"2025-07-04\",\n    \"Location\": \"Panama Beach City, FL\",\n    \"Description\": \"Annual fireworks show on the beach.\",\n    \"Event Link\": \"https://example.com/fireworks\"\n  },",
        "jsCode": "const items = $input.all();\nconst parsedItems = items.map((item) => {\n  const data = JSON.parse(item.json.output);\n  return data.map((event) => {\n    return {\n      \"Event Name\": event.event_name,\n      Date: event.date_time.split(\" | \")[0],\n      Location: event.location,\n      Description: event.description,\n      \"Event Link\": event.event_link,\n    };\n  });\n});\n\nreturn parsedItems.flat();\n"
      },
      "type": "n8n-nodes-base.aiTransform",
      "typeVersion": 1,
      "position": [
        800,
        640
      ],
      "id": "f788b097-e25e-4b56-baf2-c1dd584de620",
      "name": "AI Transform"
    },
    {
      "parameters": {
        "content": "Execute Monitoring Content",
        "height": 600,
        "width": 1340
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        100,
        400
      ],
      "id": "6cc44d96-72f3-426f-b4cc-6f437009b67d",
      "name": "Sticky Note"
    }
  ],
  "pinData": {
    "On form submission": [
      {
        "json": {
          "Query": "Find local events and holidays",
          "City": "Panama Beach City",
          "Country": "United States",
          "Date Range": "July 4 to July 12",
          "Interests": "Local events, holidays, etc",
          "submittedAt": "2025-07-03T20:55:31.837-05:00",
          "formMode": "test"
        }
      }
    ],
    "AI Agent": [
      {
        "json": {
          "output": "[\n  {\n    \"event_name\": \"🎆 Star-Spangled Spectacular: Fourth of July Fireworks on the Beach 🎆\",\n    \"date_time\": \"July 4, 2024 | Fireworks start at 9:00pm\",\n    \"location\": \"Multiple locations along Panama City Beach, including Russell-Fields Pier, M.B. Miller Pier, and Grand Lagoon\",\n    \"description\": \"Celebrate Independence Day with the biggest fireworks display on the Gulf Coast! The show is visible from many beachfront locations, perfect for friends and families. Enjoy live music, beachside festivities, and patriotic fun throughout the evening.\",\n    \"event_link\": \"https://www.visitpanamacitybeach.com/events/july-4th-events/\"\n  },\n  {\n    \"event_name\": \"🎶 Free Summer Concert Series at Aaron Bessant Park 🎶\",\n    \"date_time\": \"Thursday, July 11, 2024 | 7:00pm - 9:00pm\",\n    \"location\": \"Aaron Bessant Park Amphitheater, 500 W Park Dr, Panama City Beach, FL 32413\",\n    \"description\": \"Bring your lawn chairs and blankets for a relaxing evening under the stars with local bands playing at the beautiful Aaron Bessant Park. A family-friendly, free event, perfect for music lovers.\",\n    \"event_link\": \"https://www.visitpanamacitybeach.com/events/summer-concert-series/\"\n  },\n  {\n    \"event_name\": \"🍓 Panama City Farmers' Market\",\n    \"date_time\": \"Saturday, July 6, 2024 | 8:00am - 1:00pm\",\n    \"location\": \"McKenzie Park, 218 Harrison Ave, Panama City, FL 32401\",\n    \"description\": \"Browse fresh local produce, crafts, and food trucks at the weekly farmers’ market. Meet local artisans and enjoy a taste of the region’s best.\",\n    \"event_link\": \"https://www.facebook.com/downtownpanamacityfarmersmarket/\"\n  },\n  {\n    \"event_name\": \"🌊 Beach Bash & Cornhole Day\",\n    \"date_time\": \"Saturday, July 6, 2024 | 11:00am onwards\",\n    \"location\": \"Panama City Beach (specific venue varies, check local listings)\",\n    \"description\": \"A festive beach day with games, a cornhole competition, face painting, and lunch & dinner options. Family-friendly with fun activities for all ages.\",\n    \"event_link\": \"https://www.visitpanamacitybeach.com/events/\"\n  }\n]"
        }
      }
    ]
  },
  "connections": {
    "Store Event Data": {
      "main": [
        [
          {
            "node": "Trigger Content Generation",
            "type": "main",
            "index": 0
          },
          {
            "node": "Log RSS Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "SerpAPI": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "AI Transform",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Transform": {
      "main": [
        [
          {
            "node": "Store Event Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4e4c1c7a-5ed6-4292-9a89-300543896156",
  "meta": {
    "instanceId": "28a7da0c21649fe5ac251e08696a0b9513135217fdb87254be99700c570f4293"
  },
  "id": "wWmjYXKpsnTnTADm",
  "tags": [
    {
      "createdAt": "2025-07-02T21:55:58.615Z",
      "updatedAt": "2025-07-02T21:55:58.615Z",
      "id": "sZmccVasFp3L3Hvc",
      "name": "RSS Monitoring"
    }
  ]
}